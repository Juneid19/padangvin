<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>iframe tester</title>
    <link rel="stylesheet" href="https://public.codepenassets.com/css/reset-2.0.min.css">


  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>iframe tester</title>
    <link rel="stylesheet" href="https://public.codepenassets.com/css/reset-2.0.min.css">


  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Firza Web Radio Player</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#050014">

  <link rel="apple-touch-icon" href="https://frpadang.netlify.app/img/default.jpg">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #050014;
      --bg-alt: #070020;
      --glass: rgba(7, 0, 32, 0.85);
      --border-soft: rgba(255, 255, 255, 0.08);

      --accent-rgb: 0, 255, 200;
      --accent: rgb(var(--accent-rgb));
      --accent-soft: rgba(var(--accent-rgb), 0.16);

      --text-primary: #f9f7ff;
      --text-muted: #8f8bb6;
      --danger: #ff3366;
      --shadow-strong: 0 0 40px rgba(0, 0, 0, 0.9);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: "Space Grotesk", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, rgba(0, 255, 200, 0.15), transparent 55%),
        radial-gradient(circle at bottom right, rgba(255, 51, 102, 0.12), transparent 55%),
        linear-gradient(135deg, #040018 0%, #030010 35%, #050020 100%);
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      overflow: hidden;
    }

    #bgParticles {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      filter: blur(0.2px);
    }

    .player-wrapper {
      position: relative;
      width: 100%;
      max-width: 960px;
      padding: 18px;
      border-radius: 24px;
      background: radial-gradient(circle at top left, rgba(255, 255, 255, 0.07), transparent 60%) border-box,
                  linear-gradient(135deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.01)) padding-box,
                  var(--glass);
      border: 1px solid var(--border-soft);
      box-shadow:
        0 0 0 1px rgba(255, 255, 255, 0.02),
        0 24px 60px rgba(3, 0, 24, 0.9),
        0 0 30px rgba(var(--accent-rgb), 0.33);
      backdrop-filter: blur(22px) saturate(140%);
      display: flex;
      flex-direction: column;
      gap: 18px;
      overflow: hidden;
      animation: neonPulse 5s ease-in-out infinite;
      will-change: box-shadow, transform;
    }

    .player-wrapper::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 0% 0%, rgba(var(--accent-rgb), 0.06), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(255, 51, 102, 0.07), transparent 60%);
      opacity: 0.9;
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: -1;
    }

    @keyframes neonPulse {
      0%, 100% {
        box-shadow:
          0 0 0 1px rgba(255, 255, 255, 0.03),
          0 22px 55px rgba(3, 0, 24, 0.9),
          0 0 26px rgba(var(--accent-rgb), 0.36);
        transform: translateY(0);
      }
      50% {
        box-shadow:
          0 0 0 1px rgba(255, 255, 255, 0.16),
          0 26px 65px rgba(3, 0, 32, 1),
          0 0 52px rgba(var(--accent-rgb), 0.95);
        transform: translateY(-1px);
      }
    }

    .station-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .station-brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .station-logo {
      width: 48px;
      height: 48px;
      border-radius: 16px;
      object-fit: cover;
      box-shadow:
        0 0 0 2px rgba(0, 0, 0, 0.9),
        0 0 18px rgba(var(--accent-rgb), 0.7);
    }
    .station-text h1 {
      font-size: 1.1rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--text-primary);
    }
    .station-text .subtitle {
      font-size: 0.72rem;
      color: var(--text-muted);
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }
    .live-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.12), transparent 60%),
                  rgba(255, 51, 102, 0.18);
      border: 1px solid rgba(255, 51, 102, 0.6);
      color: #ffe9f0;
      font-size: 0.68rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }
    .live-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ff3366;
      box-shadow: 0 0 12px rgba(255, 51, 102, 0.95);
      animation: live-pulse 1.4s ease-in-out infinite;
    }
    @keyframes live-pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.4); opacity: 0.5; }
    }

    .meta-right {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.72rem;
      color: var(--text-muted);
    }
    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(2, 0, 22, 0.85);
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
    }
    .chip.accent {
      border-color: rgba(var(--accent-rgb), 0.65);
      color: rgba(255, 255, 255, 0.95);
      background: radial-gradient(circle at 20% 0, rgba(var(--accent-rgb), 0.25), transparent 65%),
                  rgba(2, 0, 15, 0.9);
      box-shadow:
        0 0 14px rgba(var(--accent-rgb), 0.7),
        0 0 0 1px rgba(255, 255, 255, 0.05);
    }

    /* Layout: vinyl di atas, info di bawah, semuanya center */
    .player-main {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 24px;
    }

    .vinyl-zone {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px 0;
    }
    .vinyl-wrapper {
      position: relative;
      width: min(280px, 80vw);
      aspect-ratio: 1 / 1;
    }
    .vinyl-shadow {
      position: absolute;
      inset: 18px;
      border-radius: 50%;
      background: radial-gradient(circle at 50% 30%, rgba(0, 0, 0, 0.6), transparent 70%);
      filter: blur(12px);
      opacity: 0.7;
      z-index: 0;
    }
    .vinyl {
      position: absolute;
      inset: 0;
      margin: auto;
      border-radius: 50%;
      background:
        radial-gradient(circle at 30% 0%, rgba(255, 255, 255, 0.12), transparent 60%),
        radial-gradient(circle at 70% 120%, rgba(0, 0, 0, 0.7), transparent 70%),
        radial-gradient(circle, #111118 0, #030309 70%, #000 100%);
      box-shadow:
        0 0 14px rgba(0, 0, 0, 1),
        0 0 40px rgba(0, 0, 0, 0.9);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      transform-origin: 50% 50%;
    }
    .vinyl::before {
      content: "";
      position: absolute;
      inset: 10%;
      border-radius: 50%;
      background-image:
        repeating-radial-gradient(circle, rgba(255, 255, 255, 0.04) 0px, rgba(255, 255, 255, 0.04) 1px, transparent 1px, transparent 3px),
        radial-gradient(circle at 50% 20%, rgba(255, 255, 255, 0.07), transparent 65%);
      mix-blend-mode: screen;
      opacity: 0.4;
      pointer-events: none;
    }
    .vinyl-grooves {
      position: absolute;
      inset: 18%;
      border-radius: 50%;
      background-image:
        repeating-radial-gradient(circle, rgba(255, 255, 255, 0.08) 0px, rgba(255, 255, 255, 0.08) 0.6px, transparent 0.6px, transparent 2.2px);
      mix-blend-mode: soft-light;
      opacity: 0.35;
      pointer-events: none;
    }
    .vinyl-label {
      position: absolute;
      width: 52%;
      height: 52%;
      border-radius: 50%;
      background:
        radial-gradient(circle at 0 0, rgba(var(--accent-rgb), 0.4), transparent 70%),
        radial-gradient(circle at 100% 100%, rgba(255, 51, 102, 0.45), transparent 70%),
        radial-gradient(circle, #040011, #030006 80%);
      border: 2px solid rgba(255, 255, 255, 0.1);
      box-shadow:
        0 0 0 1px rgba(0, 0, 0, 0.9),
        0 0 26px rgba(var(--accent-rgb), 0.7);
    }
    .vinyl-cover-mask {
      position: absolute;
      width: 54%;
      height: 54%;
      border-radius: 50%;
      overflow: hidden;
      box-shadow:
        0 0 0 1px rgba(0, 0, 0, 0.8),
        0 0 18px rgba(0, 0, 0, 0.95),
        0 0 24px rgba(var(--accent-rgb), 0.6);
      transform: scale(0.96);
    }
    .vinyl-cover-mask img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.04);
      filter: contrast(1.04) saturate(1.1);
    }
    .vinyl-center {
      position: absolute;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: radial-gradient(circle, #fafafa, #888 40%, #111 100%);
      box-shadow:
        0 0 0 2px rgba(0, 0, 0, 0.9),
        0 0 12px rgba(var(--accent-rgb), 0.9);
      z-index: 3;
    }

    .tonearm {
      position: absolute;
      width: 46%;
      height: 6px;
      background: linear-gradient(90deg, #2d2d33, #5e5e6a);
      border-radius: 999px;
      right: -2%;
      top: 20%;
      transform-origin: 8px 50%;
      transform: rotate(22deg);
      box-shadow:
        0 0 0 1px rgba(255, 255, 255, 0.06),
        0 0 18px rgba(0, 0, 0, 1);
      transition: transform 0.5s cubic-bezier(0.32, 0.01, 0.16, 1), box-shadow 0.5s ease;
    }
    .tonearm::before {
      content: "";
      position: absolute;
      left: -14px;
      top: 50%;
      width: 18px;
      height: 18px;
      transform: translateY(-50%);
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #fdfdfd, #b6b6c4 45%, #3b3b46 100%);
      box-shadow:
        0 0 0 1px rgba(0, 0, 0, 0.9),
        0 0 18px rgba(0, 0, 0, 0.9);
    }
    .tonearm::after {
      content: "";
      position: absolute;
      right: -6px;
      top: 50%;
      width: 14px;
      height: 22px;
      transform: translateY(-50%);
      border-radius: 6px;
      background: radial-gradient(circle at 0 0, #fdfdfd, #777787 60%, #2a2a33 100%);
      box-shadow:
        0 0 0 1px rgba(0, 0, 0, 0.9),
        0 0 14px rgba(0, 0, 0, 0.9);
    }

    .vinyl.is-playing {
      animation: vinyl-rotate 18s linear infinite;
    }
    .tonearm.is-active {
      transform: rotate(4deg);
      box-shadow:
        0 0 0 1px rgba(255, 255, 255, 0.06),
        0 0 28px rgba(var(--accent-rgb), 0.8);
    }
    @keyframes vinyl-rotate {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    .info-zone {
      width: 100%;
      max-width: 540px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 14px;
      padding: 8px 0;
    }
    .now-playing-label {
      font-size: 0.72rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-muted);
    }
    .track-text-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
      padding: 8px 12px;
      border-radius: 14px;
      background:
        radial-gradient(circle at 0 0, rgba(var(--accent-rgb), 0.15), transparent 70%),
        rgba(3, 0, 20, 0.9);
      border: 1px solid rgba(var(--accent-rgb), 0.4);
      box-shadow:
        0 0 24px rgba(var(--accent-rgb), 0.5),
        0 0 0 1px rgba(0, 0, 0, 0.9);
    }
    .marquee-container {
      position: relative;
      overflow: hidden;
      white-space: nowrap;
      max-width: 100%;
    }
    .marquee-inner {
      display: inline-flex;
      align-items: center;
      min-width: 100%;
    }
    .marquee-text {
      display: inline-block;
      padding-right: 2.5rem;
    }
    .marquee-text.clone {
      opacity: 0;
    }
    .marquee-active .marquee-text.clone {
      opacity: 1;
    }
    .marquee-active .marquee-inner {
      animation: marquee-scroll 14s linear infinite;
    }
    @keyframes marquee-scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    #trackTitle {
      font-size: 1.16rem;
      font-weight: 600;
      letter-spacing: 0.02em;
      color: #ffffff;
      text-shadow:
        0 0 20px rgba(var(--accent-rgb), 0.9),
        0 0 5px rgba(var(--accent-rgb), 0.9);
    }
    #trackArtist {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .controls-row {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-top: 4px;
    }

    .play-btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      background:
        radial-gradient(circle at 30% 0, rgba(255, 255, 255, 0.2), transparent 55%),
        radial-gradient(circle at 80% 120%, rgba(0, 0, 0, 0.9), transparent 70%),
        linear-gradient(135deg, rgba(var(--accent-rgb), 0.6), rgba(255, 51, 102, 0.75));
      box-shadow:
        0 0 0 1px rgba(255, 255, 255, 0.1),
        0 0 30px rgba(var(--accent-rgb), 0.7),
        0 14px 30px rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      animation: neonPulseButton 2.8s ease-in-out infinite;
      will-change: transform, box-shadow;
      transition:
        transform 0.15s ease,
        box-shadow 0.15s ease,
        filter 0.15s ease;
    }
    .play-btn::after {
      content: "";
      position: absolute;
      inset: 14%;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.45);
      box-shadow: 0 0 16px rgba(255, 255, 255, 0.6);
      opacity: 0.45;
      pointer-events: none;
    }

    @keyframes neonPulseButton {
      0%, 100% {
        box-shadow:
          0 0 0 1px rgba(255, 255, 255, 0.1),
          0 0 30px rgba(var(--accent-rgb), 0.65),
          0 14px 30px rgba(0, 0, 0, 0.9);
        transform: scale(1);
      }
      50% {
        box-shadow:
          0 0 0 1px rgba(255, 255, 255, 0.25),
          0 0 48px rgba(var(--accent-rgb), 1),
          0 18px 38px rgba(0, 0, 0, 1);
        transform: scale(1.03);
      }
    }

    .play-btn:hover {
      filter: brightness(1.08);
      transform: translateY(-1px) scale(1.05);
    }
    .play-btn:active {
      transform: scale(0.97);
      box-shadow:
        0 0 0 1px rgba(255, 255, 255, 0.08),
        0 8px 22px rgba(0, 0, 0, 1);
    }

    .play-icon {
      position: relative;
      width: 20px;
      height: 20px;
    }
    .play-icon::before,
    .play-icon::after {
      content: "";
      position: absolute;
      inset: 0;
      margin: auto;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }
    .play-icon::before {
      width: 0;
      height: 0;
      border-top: 9px solid transparent;
      border-bottom: 9px solid transparent;
      border-left: 14px solid #fff;
      transform: translateX(2px);
    }
    .play-icon::after {
      width: 0;
      height: 0;
      border-left: 0;
      border-right: 0;
      opacity: 0;
    }
    .is-paused .play-icon::before {
      opacity: 1;
      transform: translateX(2px) scale(1);
    }
    .is-playing-btn .play-icon::before {
      opacity: 0;
      transform: translateX(2px) scale(0.3);
    }
    .is-playing-btn .play-icon::after {
      opacity: 1;
      width: 14px;
      height: 14px;
      border-left: 4px solid #fff;
      border-right: 4px solid #fff;
      border-radius: 1px;
      transform: translateX(0);
    }

    .volume-group {
      display: flex;
      align-items: center;
      gap: 8px;
      flex: 1;
    }
    .volume-icon-btn {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(3, 0, 22, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      padding: 0;
      color: var(--text-muted);
      transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease, transform 0.1s ease;
    }
    .volume-icon-btn:hover {
      border-color: rgba(var(--accent-rgb), 0.8);
      background: rgba(6, 0, 38, 0.9);
      color: #fff;
      transform: translateY(-0.5px);
    }

    #volumeIcon {
      position: relative;
      display: block;
      width: 18px;
      height: 16px;
    }
    #volumeIcon::before {
      content: "";
      position: absolute;
      left: 0;
      top: 4px;
      width: 10px;
      height: 8px;
      border-radius: 2px;
      box-shadow: inset 0 0 0 1.5px currentColor;
    }
    #volumeIcon::after {
      content: "";
      position: absolute;
      right: 0;
      top: 2px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      border: 1.6px solid currentColor;
      border-left-color: transparent;
      border-bottom-color: transparent;
      transform: rotate(35deg);
      transform-origin: center;
    }
    .muted #volumeIcon::after {
      display: none;
    }
    .muted #volumeIcon::before {
      box-shadow: inset 0 0 0 1.5px currentColor;
    }
    .muted #volumeIcon::before::after {
      content: "";
      position: absolute;
      left: -2px;
      top: -2px;
      width: 14px;
      height: 14px;
      border-top: 2px solid currentColor;
      transform: rotate(45deg);
    }

    #volumeSlider {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(var(--accent-rgb), 0.9), rgba(255, 255, 255, 0.08));
      outline: none;
      cursor: pointer;
      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.9), 0 0 16px rgba(var(--accent-rgb), 0.7);
    }
    #volumeSlider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #ffffff;
      box-shadow:
        0 0 0 2px rgba(var(--accent-rgb), 0.8),
        0 0 16px rgba(var(--accent-rgb), 0.9),
        0 0 0 1px rgba(0, 0, 0, 0.9);
      border: none;
      margin-top: -6px;
    }
    #volumeSlider::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #ffffff;
      box-shadow:
        0 0 0 2px rgba(var(--accent-rgb), 0.8),
        0 0 16px rgba(var(--accent-rgb), 0.9),
        0 0 0 1px rgba(0, 0, 0, 0.9);
      border: none;
    }
    #volumeSlider::-moz-range-track {
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(var(--accent-rgb), 0.9), rgba(255, 255, 255, 0.08));
    }

    .extra-info-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }
    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--text-muted);
      box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.6);
      transition: background 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
    }
    .status-dot[data-state="live"] {
      background: #ff3366;
      box-shadow: 0 0 14px rgba(255, 51, 102, 0.95);
      animation: status-pulse 1.4s ease-in-out infinite;
    }
    .status-dot[data-state="loading"] {
      background: var(--accent);
      box-shadow: 0 0 12px rgba(var(--accent-rgb), 0.9);
      animation: status-breathe 1.6s ease-in-out infinite;
    }
    .status-dot[data-state="error"] {
      background: #ff5555;
      box-shadow: 0 0 16px rgba(255, 85, 85, 0.9);
      transform: scale(1.1);
    }
    @keyframes status-pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3); }
    }
    @keyframes status-breathe {
      0%, 100% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.15); opacity: 1; }
    }

    @media (max-width: 768px) {
      .player-wrapper { padding: 16px 14px; border-radius: 20px; }
      .player-main { gap: 18px; }
      .vinyl-wrapper { width: min(260px, 82vw); }
      .station-header { align-items: flex-start; }
      .station-text h1 { font-size: 1rem; }
      .track-text-block { padding: 8px 10px; }
      #trackTitle { font-size: 1rem; }
      .play-btn { width: 52px; height: 52px; }
      .controls-row { gap: 10px; }
    }
    @media (max-width: 480px) {
      .player-wrapper { max-width: 100%; }
      .meta-right { display: none; }
      .vinyl-wrapper { width: min(230px, 78vw); }
      .now-playing-label { font-size: 0.7rem; }
      .track-text-block { margin-right: 4px; }
    }
  </style>
</head>
<body>
  <canvas id="bgParticles"></canvas>

  <div class="player-wrapper">
    <header class="station-header">
      <div class="station-brand">
        <img
          class="station-logo"
          src="https://frpadang.netlify.app/img/default.jpg"
          alt="Logo Radio"
        />
        <div class="station-text">
          <h1>Firza Radio Padang</h1>
          <div class="subtitle">Radio urak Tanah ULu</div>
          <span class="live-pill">
            <span class="live-dot"></span>
            LIVE STREAMING
          </span>
        </div>
      </div>

      <div class="meta-right">
        <span class="chip">ID: 5k7g2w3gtkeuv</span>
        <span class="chip accent">Zeno.FM</span>
      </div>
    </header>

    <main class="player-main">
      <section class="vinyl-zone">
        <div class="vinyl-wrapper">
          <div class="vinyl-shadow"></div>
          <div class="vinyl" id="vinyl">
            <div class="vinyl-grooves"></div>
            <div class="vinyl-label"></div>
            <div class="vinyl-cover-mask">
              <img
                id="coverArt"
                src="https://frpadang.netlify.app/img/default.jpg"
                alt="Cover Art"
              />
            </div>
            <div class="vinyl-center"></div>
          </div>
          <div class="tonearm" id="tonearm"></div>
        </div>
      </section>

      <section class="info-zone">
        <div>
          <div class="now-playing-label">Now Playing</div>
          <div class="track-text-block">
            <div class="marquee-container" id="titleMarquee">
              <div class="marquee-inner">
                <span class="marquee-text" id="trackTitle">
                  Menghubungkan ke metadata...
                </span>
                <span class="marquee-text clone" aria-hidden="true"></span>
              </div>
            </div>
            <div id="trackArtist">Zeno.FM Live Stream</div>
          </div>
        </div>

        <div class="controls-row">
          <button class="play-btn is-paused" id="playToggle" type="button" aria-label="Play/Pause">
            <span class="play-icon" id="playIcon"></span>
          </button>

          <div class="volume-group">
            <button
              class="volume-icon-btn"
              id="muteToggle"
              type="button"
              aria-label="Mute/Unmute"
            >
              <span id="volumeIcon"></span>
            </button>
            <input
              type="range"
              id="volumeSlider"
              min="0"
              max="1"
              step="0.01"
              value="0.8"
              aria-label="Volume"
            />
          </div>
        </div>

        <div class="extra-info-row">
          <span class="status-dot" id="streamStatusDot" data-state="idle"></span>
          <span id="streamStatusText">Siap memutar</span>
        </div>
      </section>
    </main>

    <audio
      id="radioAudio"
      preload="none"
      src="https://stream.zeno.fm/5k7g2w3gtkeuv"
    ></audio>
  </div>

  <script>
    // ---------- KONFIGURASI ----------
    const STREAM_URL = "https://stream.zeno.fm/5k7g2w3gtkeuv";
    const METADATA_SSE_URL =
      "https://api.zeno.fm/mounts/metadata/subscribe/5k7g2w3gtkeuv";
    const DEFAULT_COVER =
      "https://frpadang.netlify.app/img/default.jpg";

    const audio = document.getElementById("radioAudio");
    const playToggle = document.getElementById("playToggle");
    const volumeSlider = document.getElementById("volumeSlider");
    const muteToggle = document.getElementById("muteToggle");

    const trackTitleEl = document.getElementById("trackTitle");
    const trackArtistEl = document.getElementById("trackArtist");
    const coverArtEl = document.getElementById("coverArt");
    const titleMarquee = document.getElementById("titleMarquee");

    const vinyl = document.getElementById("vinyl");
    const tonearm = document.getElementById("tonearm");

    const statusDot = document.getElementById("streamStatusDot");
    const statusText = document.getElementById("streamStatusText");

    let currentCoverUrl = DEFAULT_COVER;
    let isPlaying = false;
    let isMuted = false;
    let hasReceivedMetadata = false;

    audio.volume = parseFloat(volumeSlider.value);

    function setStatus(text, state) {
      statusText.textContent = text;
      if (state) statusDot.dataset.state = state;
    }

    function updatePlayUI(playing) {
      isPlaying = playing;
      if (playing) {
        playToggle.classList.remove("is-paused");
        playToggle.classList.add("is-playing-btn");
        vinyl.classList.add("is-playing");
        tonearm.classList.add("is-active");
        setStatus("Sedang streaming", "live");
      } else {
        playToggle.classList.add("is-paused");
        playToggle.classList.remove("is-playing-btn");
        vinyl.classList.remove("is-playing");
        tonearm.classList.remove("is-active");
        if (!hasReceivedMetadata) setStatus("Jeda", "idle");
      }
    }

    function updateVolumeIconUI() {
      const vol = audio.volume;
      const muted = audio.muted || vol === 0;
      isMuted = muted;
      if (muted) muteToggle.classList.add("muted");
      else muteToggle.classList.remove("muted");
    }

    // Play / Pause
    playToggle.addEventListener("click", async () => {
      if (audio.paused) {
        try {
          if (!audio.src) audio.src = STREAM_URL;
          setStatus("Menyambungkan ke stream...", "loading");
          await audio.play();
          updatePlayUI(true);
        } catch (err) {
          console.error("Gagal memutar stream:", err);
          setStatus("Autoplay diblokir / gagal memutar", "error");
        }
      } else {
        audio.pause();
        updatePlayUI(false);
      }
    });

    volumeSlider.addEventListener("input", () => {
      const value = parseFloat(volumeSlider.value);
      audio.volume = value;
      if (value === 0) audio.muted = true;
      else if (audio.muted) audio.muted = false;
      updateVolumeIconUI();
    });

    muteToggle.addEventListener("click", () => {
      audio.muted = !audio.muted;
      if (!audio.muted && audio.volume === 0) {
        audio.volume = 0.4;
        volumeSlider.value = 0.4;
      }
      updateVolumeIconUI();
    });

    audio.addEventListener("playing", () =>
      setStatus("Sedang streaming", "live")
    );
    audio.addEventListener("pause", () => setStatus("Jeda", "idle"));
    audio.addEventListener("waiting", () =>
      setStatus("Buffering / Menunggu data...", "loading")
    );
    audio.addEventListener("stalled", () =>
      setStatus("Koneksi tersendat, mencoba lagi...", "loading")
    );
    audio.addEventListener("error", () =>
      setStatus("Terjadi kesalahan stream", "error")
    );

    // ---------- MARQUEE ----------
    function updateMarquee() {
      const cloneSpan = titleMarquee.querySelector(".marquee-text.clone");
      titleMarquee.classList.remove("marquee-active");
      cloneSpan.textContent = "";

      requestAnimationFrame(() => {
        const needsScroll =
          trackTitleEl.scrollWidth > titleMarquee.clientWidth + 4;
        if (needsScroll) {
          cloneSpan.textContent = trackTitleEl.textContent;
          titleMarquee.classList.add("marquee-active");
        }
      });
    }

    // ---------- PARSE METADATA ----------
    function parseCombinedArtistTitle(str) {
      if (!str) return { artist: "", title: "" };
      const parts = str.split(" - ");
      if (parts.length >= 2) {
        return {
          artist: parts[0].trim(),
          title: parts.slice(1).join(" - ").trim(),
        };
      }
      return { artist: "", title: str.trim() };
    }

    function parseStreamUrlInfo(str) {
      if (!str || typeof str !== "string") return { artistFromUrl: "", albumFromUrl: "" };
      let qs = str.trim();
      if (qs.startsWith("?")) qs = qs.slice(1);
      if (qs.startsWith("&")) qs = qs.slice(1);
      const params = new URLSearchParams(qs);
      const artistFromUrl = (params.get("artist") || "").trim();
      const albumFromUrl = (params.get("album") || "").trim();
      return { artistFromUrl, albumFromUrl };
    }

    function extractArtistTitleFromPayload(payload) {
      if (!payload) return { artist: "", title: "" };

      // Format SSE Zeno:
      // { mount:"...", streamTitle:"Artist - Title", streamUrl:"&artist=...&album=..." }
      if (payload.streamTitle || payload.streamUrl) {
        let artist = "";
        let title = "";

        if (payload.streamTitle) {
          const parsed = parseCombinedArtistTitle(payload.streamTitle);
          artist = parsed.artist;
          title = parsed.title;
        }

        const { artistFromUrl, albumFromUrl } = parseStreamUrlInfo(
          payload.streamUrl
        );

        if (!artist && artistFromUrl) artist = artistFromUrl;
        if (!title && albumFromUrl) title = albumFromUrl;

        return { artist, title };
      }

      if (payload.artist || payload.title) {
        return {
          artist: (payload.artist || "").trim(),
          title: (payload.title || "").trim(),
        };
      }

      return { artist: "", title: "" };
    }

    function applyMetadata(artist, title) {
      if (title) trackTitleEl.textContent = title;
      if (artist) trackArtistEl.textContent = artist;
      hasReceivedMetadata = true;
      updateMarquee();
    }

    function handleMetadataMessage(raw) {
      if (!raw) return;
      let payload;
      try {
        payload = JSON.parse(raw);
      } catch {
        const parsed = parseCombinedArtistTitle(raw);
        applyMetadata(parsed.artist, parsed.title);
        fetchCoverArt(parsed.artist, parsed.title);
        return;
      }

      const { artist, title } = extractArtistTitleFromPayload(payload);
      if (!artist && !title) return;

      console.log("Metadata diterima:", { artist, title, raw: payload });
      applyMetadata(artist, title);
      fetchCoverArt(artist, title);
    }

    // ---------- SSE METADATA ----------
    function initMetadataStream() {
      if (!("EventSource" in window)) {
        console.warn("EventSource tidak didukung browser ini.");
        setStatus("Browser tidak mendukung metadata realtime", "error");
        return;
      }

      try {
        const es = new EventSource(METADATA_SSE_URL);

        es.onopen = () => {
          console.log("SSE metadata tersambung");
        };

        es.onmessage = (event) => {
          handleMetadataMessage(event.data);
        };

        es.onerror = (err) => {
          console.error("Error SSE metadata:", err);
          setStatus("Koneksi metadata terputus", "error");
        };
      } catch (e) {
        console.error("Tidak dapat membuka EventSource:", e);
        setStatus("Gagal membuka koneksi metadata", "error");
      }
    }

    // ---------- COVER ART & THEME ----------
    async function fetchCoverArt(artist, title) {
      const termRaw = [artist, title].filter(Boolean).join(" ");
      if (!termRaw) {
        setCoverArt(DEFAULT_COVER);
        return;
      }

      const term = encodeURIComponent(termRaw);
      const url = `https://itunes.apple.com/search?term=${term}&entity=song&limit=1`;

      try {
        const resp = await fetch(url);
        if (!resp.ok) throw new Error("HTTP " + resp.status);
        const data = await resp.json();
        if (data.results && data.results.length > 0) {
          let art =
            data.results[0].artworkUrl100 || data.results[0].artworkUrl60;
          if (art) {
            art = art
              .replace("100x100bb", "600x600bb")
              .replace("100x100", "600x600");
            setCoverArt(art);
            return;
          }
        }
        setCoverArt(DEFAULT_COVER);
      } catch (e) {
        console.warn("Gagal mengambil cover art:", e);
        setCoverArt(DEFAULT_COVER);
      }
    }

    function setCoverArt(url) {
      if (!url) url = DEFAULT_COVER;
      if (url === currentCoverUrl) return;
      currentCoverUrl = url;

      const img = new Image();
      img.crossOrigin = "anonymous";
      img.onload = () => {
        coverArtEl.src = url;
        applyThemeFromImage(img);
      };
      img.onerror = () => {
        coverArtEl.src = DEFAULT_COVER;
      };
      img.src = url;
    }

    function applyThemeFromImage(img) {
      try {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        const size = 80;
        canvas.width = size;
        canvas.height = size;
        ctx.drawImage(img, 0, 0, size, size);

        const imageData = ctx.getImageData(0, 0, size, size).data;
        let r = 0,
          g = 0,
          b = 0,
          count = 0;

        for (let i = 0; i < imageData.length; i += 4) {
          const alpha = imageData[i + 3];
          if (alpha < 120) continue;
          const rr = imageData[i];
          const gg = imageData[i + 1];
          const bb = imageData[i + 2];
          const brightness = (rr + gg + bb) / 3;
          if (brightness < 40) continue;

          r += rr;
          g += gg;
          b += bb;
          count++;
        }
        if (!count) return;

        r = Math.round(r / count);
        g = Math.round(g / count);
        b = Math.round(b / count);

        const luminance = (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;
        if (luminance < 0.35) {
          const factor = 0.55;
          r = Math.round(r + (255 - r) * factor);
          g = Math.round(g + (255 - g) * factor);
          b = Math.round(b + (255 - b) * factor);
        } else if (luminance > 0.85) {
          const factor = 0.4;
          r = Math.round(r * (1 - factor));
          g = Math.round(g * (1 - factor));
          b = Math.round(b * (1 - factor));
        }

        const accentStr = `${r}, ${g}, ${b}`;
        document.documentElement.style.setProperty("--accent-rgb", accentStr);
        particleAccentRGB = { r, g, b };
      } catch (e) {
        console.warn("Gagal ekstrak warna cover:", e);
      }
    }

    // ---------- BACKGROUND PARTICLES ----------
    const particleCanvas = document.getElementById("bgParticles");
    const pctx = particleCanvas.getContext("2d");
    let particles = [];
    let particleAccentRGB = { r: 0, g: 255, b: 200 };

    function resizeCanvas() {
      particleCanvas.width = window.innerWidth * window.devicePixelRatio;
      particleCanvas.height = window.innerHeight * window.devicePixelRatio;
      pctx.setTransform(
        window.devicePixelRatio,
        0,
        0,
        window.devicePixelRatio,
        0,
        0
      );
    }

    window.addEventListener("resize", resizeCanvas);

    function createParticles() {
      const count = Math.min(90, Math.floor(window.innerWidth / 15));
      particles = [];
      for (let i = 0; i < count; i++) {
        particles.push({
          x: Math.random() * window.innerWidth,
          y: Math.random() * window.innerHeight,
          radius: Math.random() * 2.5 + 0.4,
          speedX: (Math.random() - 0.5) * 0.1,
          speedY: (Math.random() - 0.5) * 0.1,
          alpha: Math.random() * 0.7 + 0.3,
          flicker: Math.random() * 0.06 + 0.02,
        });
      }
    }

    function drawParticles() {
      const { width, height } = particleCanvas;
      pctx.fillStyle = "rgba(3, 0, 20, 0.36)";
      pctx.fillRect(0, 0, width, height);

      const { r, g, b } = particleAccentRGB;

      particles.forEach((p) => {
        p.x += p.speedX;
        p.y += p.speedY;

        if (p.x < -50) p.x = window.innerWidth + 50;
        if (p.x > window.innerWidth + 50) p.x = -50;
        if (p.y < -50) p.y = window.innerHeight + 50;
        if (p.y > window.innerHeight + 50) p.y = -50;

        p.alpha += (Math.random() - 0.5) * p.flicker;
        p.alpha = Math.max(0.05, Math.min(0.9, p.alpha));

        const gradient = pctx.createRadialGradient(
          p.x,
          p.y,
          0,
          p.x,
          p.y,
          p.radius * 8
        );
        gradient.addColorStop(0, `rgba(${r}, ${g}, ${b}, ${p.alpha})`);
        gradient.addColorStop(1, `rgba(${r}, ${g}, ${b}, 0)`);

        pctx.fillStyle = gradient;
        pctx.beginPath();
        pctx.arc(p.x, p.y, p.radius * 6, 0, Math.PI * 2);
        pctx.fill();
      });

      requestAnimationFrame(drawParticles);
    }

    // ---------- INIT ----------
    function init() {
      resizeCanvas();
      createParticles();
      requestAnimationFrame(drawParticles);

      setCoverArt(DEFAULT_COVER);
      updateVolumeIconUI();
      updateMarquee();
      initMetadataStream();
    }

    document.addEventListener("DOMContentLoaded", init);

    // ---------- PWA Service Worker ----------
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker
          .register("./sw.js")
          .then((reg) => {
            console.log("Service Worker terdaftar:", reg.scope);
          })
          .catch((err) => {
            console.warn("Gagal daftar Service Worker:", err);
          });
      });
    }
  </script>
</body>
</html>
    
  </body>
  
</html>
    
  </body>
  
</html>
